# Gregor Joseph Werner: A thematic catalogue of his works

## Folders

(Not all of these folders appear in the git repository.)

- `_book`: Quarto output
- `data`:
  - `catalogue_notes.csv`: notes added to the tables in appendix *Concordances*
  - `catalogue_overview.csv`: overall structure of the catalogue (groups and subgroups)
  - `catalogue_works.csv`:
    - all works with WerW numbers and locations
    - several sigla in a cell are separated by a pipe
    - if there are several works with an equal siglum, the last three digits of the RISM ID are appended in brackets
  - `config.yml`: script configuration
  - `fonds_moder.csv`: contents of Fonds Moder in A-Wn
  - `harich_catalogue.csv`: table of contents of HÃ¡rich's thematic catalogue
  - `instrument_abbreviations.csv`: table of instrument abbreviations, long names, and UNIMARC terms
  - `library_sigla.csv`: table of library sigla, names, and links
  - `rism_entries.xml`: RISM entries with Werner as author as of 2024-01-27
  - `works_in_rism.csv`: works listed in RISM as of 2024-01-27 (867 works)
  - `works_missing_in_rism.csv`: works without RISM entry, manually curated
  - `incipits`:
    - manually curated incipits in LY or MEI format
    - `header.ly` is required by LY incipits
    - one subfolder per work (`[group]_[number]`)
    - At least one main incipit (`main_1.ly` or `main.mei`) is required and will be used on the group overview page. If there are additional main incipits (`main_2.ly` etc), all of them will be included.
    - Incipits `1_[label].ly` and, if available, `2_[label].ly` etc are displayed when clicking on the main incipit(s) on a group page.
    - Incipits are also imported in MerMEId.
  - `works_mei`:
    - work metadata in MEI format exported from MerMEId (`[group]_[number].xml`)
    - download, process, and validate with `script/get_mermeid_xml.sh`
- `data_generated`:
  - output files generated by the scripts in this repository; can be safely deleted
  - use `ark_mapping_table.csv` to populate the SQL table of the ARK resolver
  - also download the MEI schema mei-CMN 4.0.0 for validation:
    `wget https://github.com/music-encoding/schema/raw/refs/heads/main/4.0.0/mei-CMN.rng`
- `groups`: QMD files generated by R scripts, one per group of works, and one page with an overview table; can be safely deleted
- `images`: images used on the webpage
- `incipits`: incipit images in SVG format generated from PAE code in RISM entries or from manual MEI/LY incipit source code; one subfolder per work (`[group]_[number]`); can be safely deleted
- `renv`: R environment data
- `script`: bash, Python, and R scripts

The root folder contains the usual files required by Quarto. Notably,

- `.htaccess` redirects ARKs appended to the base URL to the ARK resolver at `ark.esser-skala.at`
- `apa-6th-edition.csl` describes the citation style;
- `editions.bib` contains BibTeX entries describing (modern) editions;
- `light-dark.js` selects the appropriate image for light/dark mode (for images wirh class `.has-dark-version`)
- `references.bib` contains BibTeX entries for references;
- `styling-dark.scss` inverts colors for SVGs with class `.switches-dark-mode`; and
- `styling.scss` customizes CSS.



## How to create the webpage

1. Create the catalogue: `Rscript script/make_catalogue.R`.
2. Create PAE sources for RISM incipits: `Rscript script/create_rism_incipits.R`.
3. Engrave all incipits: `make -f script/make_incipits.mk`.
4. Prepare webpages: `Rscript script/prepare_pages.R`.
5. Render with Quarto: `quarto render` (also executes the post-render script `script/post_render.sh`).
6. Deploy the folder `_book` via rsync, either to the folder `werner-catalogue` (released versions) or `werner-catalogue-draft` (draft versions).
